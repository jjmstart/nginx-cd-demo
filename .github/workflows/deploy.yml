name: ğŸš€ è‡ªåŠ¨éƒ¨ç½² (Auto Deploy)

on:
  push:
    branches: [ "main" ]  # ç›‘å¬ main åˆ†æ”¯çš„å˜åŠ¨

jobs:
  deploy:
    runs-on: ubuntu-latest  # å€Ÿä¸€å° Ubuntu ç”µè„‘
    steps:
      - name: ğŸ”Œ è¿æ¥æœåŠ¡å™¨å¹¶æ›´æ–°ä»£ç 
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.HOST }}
          username: ${{ secrets.USERNAME }}
          key: ${{ secrets.SSH_KEY }}
          port: 65522
          script: |
            # 1. è¿›å…¥é¡¹ç›®ç›®å½• (ç»å¯¹è·¯å¾„)
            cd /opt/docker/nginx-cd-demo
            
            # 2. æ‹‰å–æœ€æ–°ä»£ç 
            git pull origin main
            
            # 3. æ‰“å°æˆåŠŸä¿¡æ¯
            echo "âœ… éƒ¨ç½²æˆåŠŸï¼ä»£ç å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚"
